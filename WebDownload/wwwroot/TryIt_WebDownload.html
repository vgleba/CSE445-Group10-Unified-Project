<!doctype html>
<meta charset="utf-8">
<title>WebDownload – TryIt</title>
<style>
    body {
        font: 14px system-ui,Segoe UI,Arial;
        margin: 24px;
        max-width: 900px
    }

    code {
        background: #f5f5f5;
        padding: 2px 4px;
        border-radius: 4px
    }

    pre {
        white-space: pre-wrap;
        border: 1px solid #ddd;
        padding: 10px;
        border-radius: 6px
    }

    .row {
        margin: 10px 0
    }

    .btn {
        padding: 6px 10px;
        border: 1px solid #888;
        border-radius: 6px;
        background: #fafafa;
        cursor: pointer
    }

        .btn:hover {
            background: #eee
        }

    input[type=text] {
        width: 100%
    }
</style>

<h1>WebDownload – TryIt</h1>

<p>
    <b>Service URL:</b> <code id="svc"></code><br>
    <b>Method:</b> <code>GET /api/download?url=&lt;string&gt;&amp;raw=&lt;bool&gt;</code><br>
    <b>Returns:</b> <code>text/plain</code> (HTML stripped by default; set <code>raw=true</code> to get raw HTML)
</p>

<div class="row">
    <label>URL</label>
    <input id="url" type="text" placeholder="https://example.org/">
</div>
<div class="row">
    <label><input id="raw" type="checkbox"> raw HTML</label>
</div>

<div class="row">
    <button class="btn" onclick="loadEx('https://example.org/')">Load example.org</button>
    <button class="btn" onclick="loadEx('https://en.wikipedia.org/wiki/Kyiv')">Load Wikipedia</button>
    <button class="btn" onclick="clearOut()">Clear</button>
</div>

<div class="row">
    <button class="btn" onclick="invoke()">Invoke</button>
</div>

<h3>Response</h3>
<pre id="out">(no response yet)</pre>

<script>
const base = location.origin;
document.getElementById('svc').textContent = base + '/api/download';

function loadEx(u){ document.getElementById('url').value = u; }
function clearOut(){ document.getElementById('out').textContent='(no response yet)'; }

async function invoke(){
  const u = document.getElementById('url').value.trim();
  const raw = document.getElementById('raw').checked ? 'true' : 'false';
  const qs = new URLSearchParams({ url: u, raw });
  const r = await fetch(base + '/api/download?' + qs, { headers: { 'accept': 'text/plain' } });
  const t = await r.text();
  document.getElementById('out').textContent = 'HTTP ' + r.status + '\n\n' + t;
}
</script>
